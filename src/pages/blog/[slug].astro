---
import { Image } from "astro:assets";
import { getEntryBySlug } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";

// export async function getStaticPaths() {
//   const posts = await getCollection("blog");
//   return posts.map((post) => ({
//     params: { slug: post.slug },
//     props: post,
//   }));
// }

// const post = Astro.props;

const { slug } = Astro.params;
const post = await getEntryBySlug("posts", slug as string);

if (!post) {
  return Astro.redirect("/404");
}

const { Content } = await post.render();
---

<Layout title={post.data.title} />
<main
  class="prose mx-auto max-w-3xl hover:prose-a:text-blue-500 prose-pre:bg-slate-100 dark:prose-invert dark:hover:prose-a:text-orange-500 dark:prose-pre:bg-slate-700 sm:prose-lg prose-code:text-orange-400 prose-code:.code-word-wrap px-8"
>
  <h1>{post.data.title}</h1>
  <Image
    width={720}
    height={360}
    src={post.data.heroImage}
    alt=""
    class="mx-auto py-5"
  />
  <div>
    <Content />
  </div>
</main>
<Footer />
